+ cd /free5gc
+ cat config/nssfcfg.conf
configuration:
  nrfUri: http://nrf:29510
  nsiList:
  - nsiInformationList:
    - nrfId: http://nrf:29510/nnrf-nfm/v1/nf-instances
      nsiId: 22
    snssai:
      sd: "010203"
      sst: 1
  nssfName: NSSF
  sbi:
    bindingIPv4: 0.0.0.0
    port: 29531
    registerIPv4: nssf
    scheme: http
  serviceNameList:
  - nnssf-nsselection
  - nnssf-nssaiavailability
  supportedNssaiInPlmnList:
  - plmnId:
      mcc: "208"
      mnc: "93"
    supportedSnssaiList:
    - sd: "010203"
      sst: 1
  supportedPlmnList:
  - mcc: "208"
    mnc: "93"
info:
  description: NSSF initial local configuration
  version: 1.0.0
logger:
  AMF:
    ReportCaller: false
    debugLevel: info
  AUSF:
    ReportCaller: false
    debugLevel: info
  Aper:
    ReportCaller: false
    debugLevel: info
  CommonConsumerTest:
    ReportCaller: false
    debugLevel: info
  FSM:
    ReportCaller: false
    debugLevel: info
  MongoDBLibrary:
    ReportCaller: false
    debugLevel: info
  N3IWF:
    ReportCaller: false
    debugLevel: info
  NAS:
    ReportCaller: false
    debugLevel: info
  NGAP:
    ReportCaller: false
    debugLevel: info
  NRF:
    ReportCaller: false
    debugLevel: info
  NamfComm:
    ReportCaller: false
    debugLevel: info
  NamfEventExposure:
    ReportCaller: false
    debugLevel: info
  NsmfPDUSession:
    ReportCaller: false
    debugLevel: info
  NudrDataRepository:
    ReportCaller: false
    debugLevel: info
  OpenApi:
    ReportCaller: false
    debugLevel: info
  PCF:
    ReportCaller: false
    debugLevel: info
  PFCP:
    ReportCaller: false
    debugLevel: info
  PathUtil:
    ReportCaller: false
    debugLevel: info
  SMF:
    ReportCaller: false
    debugLevel: info
  UDM:
    ReportCaller: false
    debugLevel: info
  UDR:
    ReportCaller: false
    debugLevel: info
  WEBUI:
    ReportCaller: false
    debugLevel: info+ GOTRACEBACK=crash ./nssf/nssf -nssfcfg config/nssfcfg.conf
Neura_nssf
2024-03-24T11:17:34Z[36m [INFO][NSSF][CFG] [0mMANAGED_BY_CONFIG_POD is true
2024-03-24T11:17:34Z[36m [INFO][Config5g][GRPC] [0mConfig Client : Creating
2024-03-24T11:17:34Z[36m [INFO][Config5g][GRPC] [0mDialing GRPC Connection -  webui:9876
2024-03-24T11:17:34Z[36m [INFO][Config5g][GRPC] [0mConnecting to GRPC ...
2024-03-24T11:17:54Z[36m [INFO][Config5g][GRPC] [0mConnecting to GRPC ...
2024-03-24T11:18:14Z[36m [INFO][Config5g][GRPC] [0mConnecting to GRPC ...
2024-03-24T11:18:34Z[36m [INFO][Config5g][GRPC] [0mConnecting to GRPC ...
2024-03-24T11:18:54Z[36m [INFO][Config5g][GRPC] [0mConnecting to GRPC ...
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel created
2024/03/24 11:19:14 INFO: [core] [Channel #1] original dial target is: "webui:9876"
2024/03/24 11:19:14 INFO: [core] [Channel #1] parsed dial target is: resolver.Target{URL:url.URL{Scheme:"webui", Opaque:"9876", User:(*url.Userinfo)(nil), Host:"", Path:"", RawPath:"", OmitHost:false, ForceQuery:false, RawQuery:"", Fragment:"", RawFragment:""}}
2024/03/24 11:19:14 INFO: [core] [Channel #1] fallback to scheme "passthrough"
2024/03/24 11:19:14 INFO: [core] [Channel #1] parsed dial target is: passthrough:///webui:9876
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel authority set to "webui:9876"
2024/03/24 11:19:14 INFO: [core] [Channel #1] Resolver state updated: {
  "Addresses": [
    {
      "Addr": "webui:9876",
      "ServerName": "",
      "Attributes": null,
      "BalancerAttributes": null,
      "Metadata": null
    }
  ],
  "Endpoints": [
    {
      "Addresses": [
        {
          "Addr": "webui:9876",
          "ServerName": "",
          "Attributes": null,
          "BalancerAttributes": null,
          "Metadata": null
        }
      ],
      "Attributes": null
    }
  ],
  "ServiceConfig": null,
  "Attributes": null
} (resolver returned new addresses)
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel switches to new LB policy "pick_first"
2024/03/24 11:19:14 INFO: [core] [pick-first-lb 0xc000116e10] Received new config {
  "shuffleAddressList": false
}, resolver state {
  "Addresses": [
    {
      "Addr": "webui:9876",
      "ServerName": "",
      "Attributes": null,
      "BalancerAttributes": null,
      "Metadata": null
    }
  ],
  "Endpoints": [
    {
      "Addresses": [
        {
          "Addr": "webui:9876",
          "ServerName": "",
          "Attributes": null,
          "BalancerAttributes": null,
          "Metadata": null
        }
      ],
      "Attributes": null
    }
  ],
  "ServiceConfig": null,
  "Attributes": null
}
2024/03/24 11:19:14 INFO: [core] [Channel #1 SubChannel #2] Subchannel created
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel Connectivity change to CONNECTING
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel exiting idle mode
2024/03/24 11:19:14 INFO: [core] [Channel #1 SubChannel #2] Subchannel Connectivity change to CONNECTING
2024-03-24T11:19:14Z[36m [INFO][LIB][Path] [0mset log level : info
2024-03-24T11:19:14Z[36m [INFO][LIB][Path] [0mset report call : false
2024/03/24 11:19:14 INFO: [core] [Channel #1 SubChannel #2] Subchannel picks a new address "webui:9876" to connect
2024-03-24T11:19:14Z[36m [INFO][NSSF][CFG] [0mconfig version [1.0.0]
2024-03-24T11:19:14Z[36m [INFO][NSSF][Init] [0mServer started
2024/03/24 11:19:14 INFO: [core] [pick-first-lb 0xc000116e10] Received SubConn state update: 0xc000116f30, {ConnectivityState:CONNECTING ConnectionError:<nil>}
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /nnssf-nssaiavailability/v1/ --> github.com/omec-project/nssf/nssaiavailability.Index (3 handlers)
[GIN-debug] DELETE /nnssf-nssaiavailability/v1/nssai-availability/:nfId --> github.com/omec-project/nssf/nssaiavailability.HTTPNSSAIAvailabilityDelete (3 handlers)
[GIN-debug] PATCH  /nnssf-nssaiavailability/v1/nssai-availability/:nfId --> github.com/omec-project/nssf/nssaiavailability.HTTPNSSAIAvailabilityPatch (3 handlers)
[GIN-debug] PUT    /nnssf-nssaiavailability/v1/nssai-availability/:nfId --> github.com/omec-project/nssf/nssaiavailability.HTTPNSSAIAvailabilityPut (3 handlers)
[GIN-debug] DELETE /nnssf-nssaiavailability/v1/nssai-availability/:nfId/:subscriptionId --> github.com/omec-project/nssf/nssaiavailability.HTTPNSSAIAvailabilityUnsubscribe (3 handlers)
2024-03-24T11:19:14Z[36m [INFO][Config5g][GRPC] [0mSubscribing to Config POD
[GIN-debug] POST   /nnssf-nssaiavailability/v1/nssai-availability/subscriptions --> github.com/omec-project/nssf/nssaiavailability.HTTPNSSAIAvailabilityPost (3 handlers)
[GIN-debug] GET    /nnssf-nsselection/v1/    --> github.com/omec-project/nssf/nsselection.Index (3 handlers)
[GIN-debug] GET    /nnssf-nsselection/v1/network-slice-information --> github.com/omec-project/nssf/nsselection.HTTPNetworkSliceInformationDocument (3 handlers)
2024-03-24T11:19:14Z[31m [ERRO][Config5g][GRPC] [0mConnectivity status: Not Ready
2024/03/24 11:19:14 INFO: [core] [Channel #1 SubChannel #2] Subchannel Connectivity change to READY
2024/03/24 11:19:14 INFO: [core] [pick-first-lb 0xc000116e10] Received SubConn state update: 0xc000116f30, {ConnectivityState:READY ConnectionError:<nil>}
2024/03/24 11:19:14 INFO: [core] [Channel #1] Channel Connectivity change to READY
2024-03-24T11:19:15Z[36m [INFO][Config5g][GRPC] [0mConnectivity status: Ready
2024-03-24T11:19:15Z[36m [INFO][Config5g][GRPC] [0mConfig Message received
2024-03-24T11:19:15Z[36m [INFO][Config5g][GRPC] [0mInitial Config Received  RestartCounter:4141576257  NetworkSlice:{Name:"default"  Nssai:{Sst:"1"  Sd:"010203"}  DeviceGroup:{Name:"5g-gnbsim-user-group1"  IpDomainDetails:{Name:"pool1"  DnnName:"internet"  UePool:"172.250.1.0/16"  DnsPrimary:"8.8.8.8"  Mtu:1460  UeDnnQos:{DnnMbrUplink:20000000  DnnMbrDownlink:200000000  TrafficClass:{Name:"platinum"  Qci:9  Arp:6  Pdb:300  Pelr:6}}}  Imsi:"208930100007487"  Imsi:"208930100007488"  Imsi:"208930100007489"  Imsi:"208930100007490"  Imsi:"208930100007491"  Imsi:"208930100007492"  Imsi:"208930100007493"  Imsi:"208930100007494"  Imsi:"208930100007495"  Imsi:"208930100007496"  Imsi:"208930100007497"  Imsi:"208930100007498"  Imsi:"208930100007499"  Imsi:"208930100007500"}  DeviceGroup:{Name:"5g-gnbsim-user-group2"  IpDomainDetails:{Name:"pool2"  DnnName:"internet"  UePool:"172.250.1.0/16"  DnsPrimary:"8.8.8.8"  Mtu:1460  UeDnnQos:{DnnMbrUplink:10000000  DnnMbrDownlink:400000000  TrafficClass:{Name:"platinum"  Qci:8  Arp:6  Pdb:300  Pelr:6}}}  Imsi:"208930100007501"  Imsi:"208930100007502"  Imsi:"208930100007503"  Imsi:"208930100007504"  Imsi:"208930100007505"  Imsi:"208930100007506"  Imsi:"208930100007507"  Imsi:"208930100007508"  Imsi:"208930100007509"  Imsi:"208930100007510"}  Site:{SiteName:"aiab"  Gnb:{Name:"aiab-gnb1"  Tac:1}  Gnb:{Name:"aiab-gnb2"  Tac:2}  Plmn:{mcc:"208"  mnc:"93"}  Upf:{UpfName:"upf"}}  AppFilters:{PccRuleBase:{FlowInfos:{FlowDesc:"permit out ip from any to assigned"  TosTrafficClass:"IPV4"  FlowDir:BIDIRECTIONAL  FlowStatus:ENABLED}  RuleId:"ALLOW-ALL"  Qos:{Var5qi:9  Arp:{PL:6  PC:MAY_PREEMPT  PV:PREEMPTABLE}}  Priority:250}}}  ConfigUpdated:1
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mReceived updateConfig in the nssf app :  RestartCounter:4141576257  NetworkSlice:{Name:"default"  Nssai:{Sst:"1"  Sd:"010203"}  DeviceGroup:{Name:"5g-gnbsim-user-group1"  IpDomainDetails:{Name:"pool1"  DnnName:"internet"  UePool:"172.250.1.0/16"  DnsPrimary:"8.8.8.8"  Mtu:1460  UeDnnQos:{DnnMbrUplink:20000000  DnnMbrDownlink:200000000  TrafficClass:{Name:"platinum"  Qci:9  Arp:6  Pdb:300  Pelr:6}}}  Imsi:"208930100007487"  Imsi:"208930100007488"  Imsi:"208930100007489"  Imsi:"208930100007490"  Imsi:"208930100007491"  Imsi:"208930100007492"  Imsi:"208930100007493"  Imsi:"208930100007494"  Imsi:"208930100007495"  Imsi:"208930100007496"  Imsi:"208930100007497"  Imsi:"208930100007498"  Imsi:"208930100007499"  Imsi:"208930100007500"}  DeviceGroup:{Name:"5g-gnbsim-user-group2"  IpDomainDetails:{Name:"pool2"  DnnName:"internet"  UePool:"172.250.1.0/16"  DnsPrimary:"8.8.8.8"  Mtu:1460  UeDnnQos:{DnnMbrUplink:10000000  DnnMbrDownlink:400000000  TrafficClass:{Name:"platinum"  Qci:8  Arp:6  Pdb:300  Pelr:6}}}  Imsi:"208930100007501"  Imsi:"208930100007502"  Imsi:"208930100007503"  Imsi:"208930100007504"  Imsi:"208930100007505"  Imsi:"208930100007506"  Imsi:"208930100007507"  Imsi:"208930100007508"  Imsi:"208930100007509"  Imsi:"208930100007510"}  Site:{SiteName:"aiab"  Gnb:{Name:"aiab-gnb1"  Tac:1}  Gnb:{Name:"aiab-gnb2"  Tac:2}  Plmn:{mcc:"208"  mnc:"93"}  Upf:{UpfName:"upf"}}  AppFilters:{PccRuleBase:{FlowInfos:{FlowDesc:"permit out ip from any to assigned"  TosTrafficClass:"IPV4"  FlowDir:BIDIRECTIONAL  FlowStatus:ENABLED}  RuleId:"ALLOW-ALL"  Qos:{Var5qi:9  Arp:{PL:6  PC:MAY_PREEMPT  PV:PREEMPTABLE}}  Priority:250}}}  ConfigUpdated:1
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mNetwork Slice Name  default
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mNetwork Slice has site name present
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mSite name  aiab
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mPlmn mcc  208
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mPlmn mnc  93
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mSlice Sst  1
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mSlice Sd  010203
2024-03-24T11:19:15Z[36m [INFO][NSSF][GRPC] [0mSend config trigger to main routine
2024-03-24T11:19:15Z[36m [INFO][NSSF][Init] [0mMinimum configuration from config pod available true
2024-03-24T11:19:15Z[36m [INFO][NSSF][Init] [0mStarted KeepAlive Timer: 86400 sec
2024-03-24T11:19:15Z[36m [INFO][NSSF][CFG] [0mSent Register NF Instance with updated profile
2024-03-24T11:25:04Z[36m [INFO][NSSF][NsSelect] [0mHandle NSSelectionGet
2024-03-24T11:25:04Z[36m [INFO][NSSF][GIN] [0m| 200 |  192.168.84.183 | GET     | /nnssf-nsselection/v1/network-slice-information?nf-id=56aa634c-3941-4cfd-b18a-01d84dd99d87&nf-type=AMF&slice-info-request-for-pdu-session=%7B%22sNssai%22%3A%7B%22sst%22%3A1%2C%22sd%22%3A%22010203%22%7D%2C%22roamingIndication%22%3A%22NON_ROAMING%22%7D |
